# BioMA.ModelLayer assembly

## CRA.ModelLayer namespace

| public type | description |
| --- | --- |
| static class [TraceHelper](./CRA.ModelLayer/TraceHelper.md) | Utility class that defines the trace source of the model layer's log messages. Trace name is 'CRA.ModelLayer' (this is the name to be used in the applications configuration files to listen to this trace). |

## CRA.ModelLayer.Core namespace

| public type | description |
| --- | --- |
| class [AtLeastOneDifferentFromZeroCondition](./CRA.ModelLayer.Core/AtLeastOneDifferentFromZeroCondition.md) | Condition to test that a VarInfo value, composed by multiple values (e.g array of doubles, list of doubles,...), has at least of value different from zero. It is an implementation of [`ICondition`](./CRA.ModelLayer.Core/ICondition.md) interface. |
| static class [CloneHelper](./CRA.ModelLayer.Core/CloneHelper.md) | Utility class to manage the clone of objects, including object of complex types like Dictionary, Arrays, List. |
| class [ConditionsCollection](./CRA.ModelLayer.Core/ConditionsCollection.md) | Represents a collection of [`ICondition`](./CRA.ModelLayer.Core/ICondition.md). This class is used to manage a certain set of conditions alltogheter. |
| class [GreaterThanCondition](./CRA.ModelLayer.Core/GreaterThanCondition.md) | Condition to test that one VarInfo value is greater than another. This kind of condition needs two VarInfos to work. It checks that the first VarInfo is greater than the second VarInfo. If the opposite happens, it gives errror. It is an implementation of [`ICondition`](./CRA.ModelLayer.Core/ICondition.md) interface. |
| interface [ICondition](./CRA.ModelLayer.Core/ICondition.md) | Represents a condition that one or more VarInfo objects must satisfy. It is used to check the values of inputs/outputs/parameters of a strategy in the model layer context (see [`Preconditions`](./CRA.ModelLayer.Core/Preconditions.md) documentation for more info on the pre/post conditions tests) |
| interface [IDataProvider](./CRA.ModelLayer.Core/IDataProvider.md) | Identifies a generic data provider. The data provider is the way a generic class can receive data from an external source (e.g. a form of persistence, like a DB). This empty interface is used as a marker for identifieng the data providers, but does not require any implementation, since the real methods are specific to the kind of data to retrieve. |
| interface [IDomainClass](./CRA.ModelLayer.Core/IDomainClass.md) | Interface implemented by domain classes. From the software point of view, domain classes are the containers of the model's variables (input, outputs of the model's algorithms). Model's variables must be of type [`VarInfo`](./CRA.ModelLayer.Core/VarInfo.md) and must be public properties of the domain classes. From the modelling point of view, domain classes represent the context in which the models are defined: being the context the ensemble of all the properties of the described environment (for example, on a model regarding soil, the context is made by all the soil properties used to describe the soil). The interface extends the [`IAnnotatable`](./CRA.ModelLayer.MetadataTypes/IAnnotatable.md) interface. Domain classes can be automatically generated using the DCC (Domain Class Coder) tool of the Bioma framework. See Bioma framework website for further info. Existing domain classes can be analyzed using the MCE (Model Component Explorer) tool of the Bioma framework. See Bioma framework website for further info. |
| interface [IManagementBase](./CRA.ModelLayer.Core/IManagementBase.md) | Base interface for impact classes, implemented via management specific interfaces. It contains the logics for saving/reading the impact content to/from XML nodes of the management definition XML files. One of the possible implementation of the IManagementBase, is the interface "CRA.AgroManagement.IManagement" defined in library "CRA.AgroManagemet2014.dll". In this specific case we reference it as the "AGROmanagement". |
| interface [ITestsOutput](./CRA.ModelLayer.Core/ITestsOutput.md) | ITestsOutput is the interface that represents a listener to the output of pre and post conditions test results. A valid implementation of this interface can be used by setting it in the [`Preconditions`](./CRA.ModelLayer.Core/Preconditions.md) using the StrategyTestsOutput property of Preconditions class. |
| interface [IVarInfo](./CRA.ModelLayer.Core/IVarInfo.md) | The interface `IVarInfo` represents a variable (input/output or pararameter of a strategy). |
| interface [IVarInfoClass](./CRA.ModelLayer.Core/IVarInfoClass.md) | Interface implemented by VarInfo classes. For each domain class there should be a VarInfoClass: a matching class, which is conventionally called as the value class plus the postfix VarInfo, that contains the description of the variables of the domain class. The corresponding domain class is referenced here as the 'domain class of reference' |
| interface [IVarInfoConverter](./CRA.ModelLayer.Core/IVarInfoConverter.md) | Manages the logic for parsing string or XML representation of the [`VarInfo.CurrentValue`](./CRA.ModelLayer.Core/VarInfo/CurrentValue.md) to a correctly parsed value and back. An implementation of this interface has to be written for each parsed type of a [`VarInfo.CurrentValue`](./CRA.ModelLayer.Core/VarInfo/CurrentValue.md), precisely for each of the [`VarInfoValueTypes`](./CRA.ModelLayer.Core/VarInfoValueTypes.md) returned by [`VarInfoValueTypes.Values`](./CRA.ModelLayer.Core/VarInfoValueTypes/Values.md) Since this interface is used also as a central point in parsing/serializing [`VarInfo`](./CRA.ModelLayer.Core/VarInfo.md) values in the MPE application (that has peculiar formats for serialization), specific methods are present, namely: |
| class [ManagementCollection&lt;T&gt;](./CRA.ModelLayer.Core/ManagementCollection-1.md) | Represents a collection of [`IManagementBase`](./CRA.ModelLayer.Core/IManagementBase.md) objects. This class is used to manage a certain set of managements alltogheter. The management objects must implement/extend type T. T is a valid implementation of [`IManagementBase`](./CRA.ModelLayer.Core/IManagementBase.md) interface. So, T represents a sub-type of IManagementBase, specific for the current configuration of the managements. For example, in case of the "AGROmanagement", T should be type interface "CRA.AgroManagement.IManagement" defined in library "CRA.AgroManagemet2014.dll". |
| class [NotZeroIfSecondNotZeroCondition](./CRA.ModelLayer.Core/NotZeroIfSecondNotZeroCondition.md) | Condition that works on two VarInfo objects: it tests that the first VarInfo value is different from zero, when the second VarInfo value is different from zero. If the second is different from zero, while the first is equal to zero, it gives error since the condition is not satisfied. In all the other cases the condition is satisfied. It is an implementation of [`ICondition`](./CRA.ModelLayer.Core/ICondition.md) interface. |
| class [PreconditionErrorException](./CRA.ModelLayer.Core/PreconditionErrorException.md) |  |
| class [Preconditions](./CRA.ModelLayer.Core/Preconditions.md) | Manager class for the pre/post condition tests of the model's variables (VarInfo objects). This class contains the methods to check the preconditions and the postconditions on the input/outputs/parameters of a model, to identify values which are not valid according to some specified conditions ([`ICondition`](./CRA.ModelLayer.Core/ICondition.md) implementations). |
| class [PreconditionsData](./CRA.ModelLayer.Core/PreconditionsData.md) | Utility class used sometimes as parameter for pre and post-conditions tests calls. It groups a collection of conditions (implementations of [`ICondition`](./CRA.ModelLayer.Core/ICondition.md) interface) into 5 different groups, according to their specific Type: AtLeastOne, CannotBeZeroIf,GreaterThan,RangeBased,RangeOneRangeTwo. They represents the more common conditions used. |
| class [RangeBasedCondition](./CRA.ModelLayer.Core/RangeBasedCondition.md) | Condition to test that a VarInfo value is greater than the VarInfo minimum value and less than the VarInfo maximum value. If the VarInfo is outside the range, it gives error since the condition is not satisfied. In all the other cases the condition is satisfied. It is an implementation of [`ICondition`](./CRA.ModelLayer.Core/ICondition.md) interface. |
| class [RangeOneRangeTwoCondition](./CRA.ModelLayer.Core/RangeOneRangeTwoCondition.md) | Condition that works on two VarInfo objects: it tests that if one VarInfo value is inside its validity range, even a second VarInfo value is inside its own range. If the second is inside the range, while the first outside the range, it gives error since the condition is not satisfied. In all the other cases the condition is satisfied. To be in the validity range means that a VarInfo value is greater than the VarInfo minimum value and less than the VarInfo maximum value. It is an implementation of [`ICondition`](./CRA.ModelLayer.Core/ICondition.md) interface. |
| class [TestsOutputDefault](./CRA.ModelLayer.Core/TestsOutputDefault.md) | Default output for the pre/post conditions tests. It either shows results on screen (saveLog=false), or it writes the results on a TXT file (the default file is "PrePostConditionsLog.txt", but it can be changed through the property LogFileName). |
| class [TestsOutputToListener](./CRA.ModelLayer.Core/TestsOutputToListener.md) | Writes the output of pre/post conditions tests to the [`CRA.ModelLayer.TraceHelper`](./CRA.ModelLayer/TraceHelper.md) class. Then the user can attach a listener to this trace source, to output the log. The log level used is System.Diagnostic.TraceEventType.Warning. The event id is 1000. |
| class [TestsOutputXML](./CRA.ModelLayer.Core/TestsOutputXML.md) | Writes the output of pre/post conditions tests to a file using the XML format (the default file is "PrePostConditionsLogXML.xml", but it can be changed through the property LogFileName). |
| class [VarInfo](./CRA.ModelLayer.Core/VarInfo.md) | The class VarInfo represents a variable in the Bioma framework: for example a parameter of a [`strategy`](./CRA.ModelLayer.Strategy/IStrategy.md), or a property of a [`domain class`](./CRA.ModelLayer.Core/IDomainClass.md). The value of the variable can be a simple value (for example a number) or a complex type (for example a Dictionary). The VarInfo object describes the type of its value using the [`ValueType`](./CRA.ModelLayer.Core/VarInfo/ValueType.md) property. The list of managed type is defined in the [`VarInfoValueTypes`](./CRA.ModelLayer.Core/VarInfoValueTypes.md) enumeration. There should always be a correspondence between the VarInfo value (property CurrentValue) and the declared type, otherwise an Exception is thrown. This correspondence can be checked at any moment by calling the method IsTypeCorrect. VarInfo extends the [`IVarInfo interface`](./CRA.ModelLayer.Core/IVarInfo.md) and the IEquatable&lt;VarInfo&gt; (this one to compare a VarInfo object vs another one). |
| static class [VarInfoEnumerableExtensionMethods](./CRA.ModelLayer.Core/VarInfoEnumerableExtensionMethods.md) | Utility methods to manage lists of [`VarInfo`](./CRA.ModelLayer.Core/VarInfo.md) objects. |
| class [VarInfoValueTypes](./CRA.ModelLayer.Core/VarInfoValueTypes.md) | [Typesafe Enum](https://www.infoworld.com/article/3198453/how-to-implement-a-type-safe-enum-pattern-in-c.html) having an instance for each parsed type that a [`VarInfo`](./CRA.ModelLayer.Core/VarInfo.md) can take. It provides parsing functionalities for converting from string representations of [`VarInfo.CurrentValue`](./CRA.ModelLayer.Core/VarInfo/CurrentValue.md) to parsed values and back. The constructor is private and the only available instances of this class can be obtained from public static properties (a variation of the [Singleton pattern](http://en.wikipedia.org/wiki/Singleton_pattern), where instead of an instance there is a set of instances). Each instance of [`VarInfo`](./CRA.ModelLayer.Core/VarInfo.md) is configured with an object of this type by setting its [`ValueType`](./CRA.ModelLayer.Core/VarInfo/ValueType.md) property to an instance of this class. |

## CRA.ModelLayer.Data namespace

| public type | description |
| --- | --- |
| class [ColumnDescriptor](./CRA.ModelLayer.Data/ColumnDescriptor.md) | Provides information on each column contained in a [`Table`](./CRA.ModelLayer.Data/ColumnDescriptor/Table.md). |
| class [DataCollection](./CRA.ModelLayer.Data/DataCollection.md) | Lightweight version of the [`DataSet`](./CRA.ModelLayer.Data/DataCollection/DataSet.md). |
| class [DataCollectionException](./CRA.ModelLayer.Data/DataCollectionException.md) | The general error in [`DataCollection`](./CRA.ModelLayer.Data/DataCollection.md). |
| static class [DataSetToDataCollectionExthensionMethod](./CRA.ModelLayer.Data/DataSetToDataCollectionExthensionMethod.md) | Adds an extension method to the DataSet class to transform the DataSet into a [`DataCollection`](./CRA.ModelLayer.Data/DataCollection.md) object. |
| class [Table](./CRA.ModelLayer.Data/Table.md) | Lightweight version of the [`DataTable`](./CRA.ModelLayer.Data/Table/DataTable.md), to be used with [`DataCollection`](./CRA.ModelLayer.Data/DataCollection.md). |

## CRA.ModelLayer.MetadataTypes namespace

| public type | description |
| --- | --- |
| interface [IAnnotatable](./CRA.ModelLayer.MetadataTypes/IAnnotatable.md) | The type of all classes that need to be documented with a URL and a description |
| class [PublisherData](./CRA.ModelLayer.MetadataTypes/PublisherData.md) | Defines the publisher data of a software component by using a list of keys (publisher fields) and values (publisher data) |

## CRA.ModelLayer.ParametersManagement namespace

| public type | description |
| --- | --- |
| abstract class [AXmlRW](./CRA.ModelLayer.ParametersManagement/AXmlRW.md) | Xml parameter [`reader`](./CRA.ModelLayer.ParametersManagement/IValuesReader.md)/[`writer`](./CRA.ModelLayer.ParametersManagement/IValuesWriter.md). The xml is compliant to the MPE xml format (xml schema:'ValuesXmlSchema.xsd', targetNamespace="http://CRA.ParameterEditor.org/ValuesXmlSchema.xsd") Xml files containing parameters can be edited by the application MPE (Model Parameter Editor), which uses, as definition, the DCC Xml file used to generate the parameters class. |
| static class [DataTypeFactory](./CRA.ModelLayer.ParametersManagement/DataTypeFactory.md) | Utility class to help creating instances of the parameters management classes ([` CRA.ModelLayer.ParametersManagement.IParametersSet`](./CRA.ModelLayer.ParametersManagement/IParametersSet.md),[`CRA.ModelLayer.ParametersManagement.ISetDescriptor`](./CRA.ModelLayer.ParametersManagement/ISetDescriptor.md),[`IKeyValue`](./CRA.ModelLayer.ParametersManagement/IKeyValue.md)) |
| interface [IKeyValue](./CRA.ModelLayer.ParametersManagement/IKeyValue.md) | Value of a key type. |
| interface [IParameterEditor](./CRA.ModelLayer.ParametersManagement/IParameterEditor.md) | Interface that a generic parameter editor must implement. The editor should be able to manage the [`IValuesReader`](./CRA.ModelLayer.ParametersManagement/IValuesReader.md) and [`IValuesWriter`](./CRA.ModelLayer.ParametersManagement/IValuesWriter.md) instances passed as parameters to read and write parameters from/to a persistence source (e.g. an XML file or a DB) |
| interface [IParameters](./CRA.ModelLayer.ParametersManagement/IParameters.md) | Represents a parameter's class. A parameter class is a well-defined set of parameters plus the methods to read/write the parameters from/to a form of persitence (e.g. an XMl file or a DB). A parameter is a [`VarInfo`](./CRA.ModelLayer.Core/VarInfo.md) object. The parameters belonging to the class can assume different values. Each set of values is called parameters set. The parameters set is identified by a specific value of the ParametersKey The code of a class realizing IParameters is typically generated via the code generator DCC (Domain Class Coder). The file name is automatically assigned by DCC according to the following convention: FullClassName_parameters.xml |
| interface [IParametersSet](./CRA.ModelLayer.ParametersManagement/IParametersSet.md) | Parameters set. |
| interface [IParamsReader](./CRA.ModelLayer.ParametersManagement/IParamsReader.md) |  |
| interface [ISetDescriptor](./CRA.ModelLayer.ParametersManagement/ISetDescriptor.md) | Descriptor of the parameters set. |
| abstract class [IValuesReader](./CRA.ModelLayer.ParametersManagement/IValuesReader.md) | This interface must be implemented by the parameters readers in the Bioma framework. |
| interface [IValuesWriter](./CRA.ModelLayer.ParametersManagement/IValuesWriter.md) | This interface must be implemented by the parameters writers in the Bioma framework. |
| static class [ParametersExtension](./CRA.ModelLayer.ParametersManagement/ParametersExtension.md) | Utility class containing extension method of the [`IParameters`](./CRA.ModelLayer.ParametersManagement/IParameters.md) interface. |
| class [ParametersIO](./CRA.ModelLayer.ParametersManagement/ParametersIO.md) | Utility class to manage the parameters of a [`domain class`](./CRA.ModelLayer.Core/IDomainClass.md). The domain class is specified in the constructor. |
| class [XmlRW](./CRA.ModelLayer.ParametersManagement/XmlRW.md) | Xml parameter [`reader`](./CRA.ModelLayer.ParametersManagement/IValuesReader.md)/[`writer`](./CRA.ModelLayer.ParametersManagement/IValuesWriter.md). The xml is compliant to the MPE xml format (xml schema:'ValuesXmlSchema.xsd', targetNamespace="http://CRA.ParameterEditor.org/ValuesXmlSchema.xsd") Xml files containing parameters can be edited by the application MPE (Model Parameter Editor), which uses, as definition, the DCC Xml file used to generate the parameters class. |

## CRA.ModelLayer.Strategy namespace

| public type | description |
| --- | --- |
| class [CompositeStrategyVarInfo](./CRA.ModelLayer.Strategy/CompositeStrategyVarInfo.md) | [`VarInfo`](./CRA.ModelLayer.Core/VarInfo.md) extension to manage the Current Value of the VarInfo of a composite strategy accordingly to the Current Value of the VarInfo of the simple class behind |
| class [CompositeSwitch](./CRA.ModelLayer.Strategy/CompositeSwitch.md) | [` CRA.ModelLayer.Strategy.Switch`](./CRA.ModelLayer.Strategy/Switch.md) extension to manage manage the Value of the Switch of a composite strategy accordingly to the Value of the Switch of the simple class behind |
| interface [IStrategy](./CRA.ModelLayer.Strategy/IStrategy.md) | Interface implemented by strategy classes. From the software point of view, strategies are the building blocks of the model algorithm. They can be selected at runtime to be used, implementing the strategy design pattern: the model offers different way to get some output, and the user can select directly at run time the ones to be used in a specific context. From a modelling point of view, strategies are the implementation of the model's logics in terms of equations. Moreover strategies implement the test of pre/post-conditions on the input, the outputs and the parameters of the model. Strategies can be combined together, leading to the creation of a 'composite' strategy. This can happen only if the involved strategies share the same strategy component interface (see below). Each strategy exposes the list of its switches (see [`Switch class`](./CRA.ModelLayer.Strategy/Switch.md) documentation), inputs, outputs and parameters. Each variable used by the strategy (input, output or parameter) is represented by a [`VarInfo class`](./CRA.ModelLayer.Core/VarInfo.md) class. Those variables are managed through the [`ModellingOptionsManager object`](./CRA.ModelLayer.Strategy/ModellingOptionsManager.md) of the strategy. The sets of related variables are usually contained in a [`domain class`](./CRA.ModelLayer.Core/IDomainClass.md) which represents a part of the domain of the simulated process (e.g. State of a soil layer) All the strategies of the same library (component) share the same domain classes, since the models share the same simulated physical domain. The IStrategy interface does not define any method for containing the logic of the model. This is because the logic method must contain in its signature the list of domain classes used, and this list changes according to the specific component. Thus, any component should define a 'strategy component interface': a strategy component interface is an interface that extends the IStrategy interface and is defined inside every component. All the strategies of the component should implement it. This behaviour guarantees that all the strategies share the same domain classes and so they can 'dialogue' between themselves. The strategy component interface must define 3 methods: an 'Update' method containing the logics of the model, a 'TestPreconditions' method containing the preconditions tests and a 'TestPostconditions' method containing the postconditions tests. The three method should declare all the domain classes of the components in their signature. Strategies can be automatically generated using the SCC (Strategy Class Coder) tool of the Bioma framework. See Bioma website for further info. Existing strategies can be analyzed using the MCE (Model Component Explorer) tool of the Bioma framework. See Bioma website for further info. |
| static class [IStrategyExtensionMethods](./CRA.ModelLayer.Strategy/IStrategyExtensionMethods.md) | Extension method for the IStrategy interface |
| class [ModellingOptions](./CRA.ModelLayer.Strategy/ModellingOptions.md) | This class is a container for the 'options' of a strategy: the inputs, the outputs, the parameters and the associated strategies. We use here the word 'option' because these strategy characteristics may change according to a switch value. When a switch value changes, the options that the strategy shows may change. If the strategy has no switches the returned parameters/inputs/outputs/associated strategies sets will be always the same. (see [`ModellingOptionsManager class`](./CRA.ModelLayer.Strategy/ModellingOptionsManager.md)) Every one of this 4 kinds of 'options' is returned as a public property. |
| class [ModellingOptionsManager](./CRA.ModelLayer.Strategy/ModellingOptionsManager.md) |  |
| class [PropertyDescription](./CRA.ModelLayer.Strategy/PropertyDescription.md) | Describes a property of a [`domain class object`](./CRA.ModelLayer.Core/IDomainClass.md) in terms of domain class type, property type, property [`VarInfo`](./CRA.ModelLayer.Core/VarInfo.md), property name. |
| class [Switch](./CRA.ModelLayer.Strategy/Switch.md) | The Switch class representsca choiche in the internal behavior of a model. A switch has a name and a value. The value must be selected among a set of acceptable values. A different value will cause a different model behavior and different [`ModellingOptions`](./CRA.ModelLayer.Strategy/ModellingOptions.md) returned (e.g. a different set of inputs, outputs or parameters). |

## global namespace

| public type | description |
| --- | --- |
| class [AssemblyInfo](./global/AssemblyInfo.md) |  |

<!-- DO NOT EDIT: generated by xmldocmd for BioMA.ModelLayer.dll -->
